<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pagecontent</title>


    <!-- Material Design -->
    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
        rel="stylesheet">
    <!-- ICON CSS -->
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css">


    <!-- globalstyle -->
    <link rel="stylesheet" href="../css/globalstyle.css">
    <!-- globalattributes -->
    <link rel="stylesheet" href="../css/globalattributes.css">
    <!-- åŠ å…¥é ç°½å°åœ– -->
    <link rel="shortcut icon" href="https://upload.cc/i1/2022/10/18/wJdKCL.png" type="image/x-icon">


    <!-- è¤‡æ•¸é é¢ä½¿ç”¨CSSæ•ˆæœ -->
    <link rel="stylesheet" href="/css/pluralpagestyle.css">

    <!-- åƒ…é™æœ¬é ä½¿ç”¨CSSæ•ˆæœ -->




    <style>
        /* æœ€ä¸Šå±¤Todoçš„Tableä¸éœ€è¦æ¡†ç·šæ¨£å¼ï¼Œæ•…åˆ†é–‹ --------------------------- */
        .pageTodoTable {
            margin: auto;
            table-layout: fixed;
            word-break: break-all;
            word-wrap: break-word;
            width: 100%;
            text-align: center;
        }

        /* ç¬¬äºŒæ ¼tdçš„é‚Šæ¡†é¡è‰² */
        .pageTodoTable td:nth-child(2) {
            border-color: var(--color-border);
        }

        .pageTodoTable td:hover {
            background-color: var(--color-informationhover);
            border-radius: 0.3rem;
            cursor: pointer;
        }

        .pageTodoTable td p {
            /* color: var(--color-sunorange); */
            color: var(--color-alizarincrimson);
        }


        /* æœ€ä¸‹æ–¹å…©å±¤Tableéœ€è¦æ¡†ç·šæ¨£å¼ --------------------------- */
        .pageTable {
            margin: auto;
            table-layout: fixed;
            word-break: break-all;
            word-wrap: break-word;
            width: 100%;

            border-collapse: separate;
            border-spacing: 0;
            border-radius: 0.3rem;
            border: 1px solid var(--color-border);
        }

        .pageTable .stockTable th {
            height: var(--table-thheight);

            color: var(--color-irongray);
            font-weight: var(--font-weight-contenttitle);
            background-color: var(--color-tableth);
        }

        .pageTable .buyTable th {
            height: var(--table-thheight);

            color: var(--color-secfont);
            font-weight: var(--font-weight-contenttitle);
            background-color: var(--color-sectablefirst);
        }

        .pageTable .sellTable th {
            height: var(--table-thheight);

            color: var(--color-secfont);
            font-weight: var(--font-weight-contenttitle);
            background-color: var(--color-sectablesecond);
        }

        .pageTable td {
            height: var(--table-tdheight);
            padding-top: 18px;
            padding-bottom: 18px;
            border-top: 1px solid var(--color-border);
        }
    </style>

</head>

<body>
    <div class="container">
        <div class="row justify-content-center">

            <div class="col-11 mt-4 mb-5 px-0">

                <!-- åˆ†é å¤§æ¨™ -->
                <h1 class="fs-2 fw-bold mb-4"><span class="text-black">é¦¬é›²ï¼Œæ­¡è¿å›åˆ°ç®¡ç†ä»‹é¢ï¼</span></h1>


                <div class="bg-white rounded-3 shadow-sm py-4 px-4 w-100 h-auto mb-4">

                    <!-- é€™è£¡æ˜¯å…§å®¹çš„æ¡†æ¶ï¼Œå¯ç›´æ¥æ”¹æ‰æ¡†æ¶ -->
                    <p class="fs-5 d-inline-flex mb-4 contenttitle">ç·Šæ€¥ç¢ºèªäº‹é …</p>

                    <table class="pageTodoTable fs-5 fw-normal">
                        <tr>
                            <td onclick="callParent(0)">
                                <p class="fs-2">17</p>
                                <span class="d-block pb-2">åº«å­˜</span>
                            </td>
                            <td class="border-1 border-top-0 border-bottom-0" onclick="callParent(1)">
                                <p class="fs-2">10</p>
                                <span class="d-block pb-2">å«è²¨</span>
                            </td>

                            <td onclick="callParent(2)">
                                <p class="fs-2">36</p>
                                <span class="d-block pb-2">æ¥å–®</span>
                            </td>
                        </tr>
                    </table>
                </div>


                <!-- ç·Šæ€¥åº«å­˜æ¸…å–®---------------------------------------------------------------------------------- -->
                <div class="pageTable1 bg-white rounded-3 shadow-sm py-4 px-4 w-100 h-auto mb-4">

                    <!-- é€™è£¡æ˜¯å…§å®¹çš„æ¡†æ¶ï¼Œå¯ç›´æ¥æ”¹æ‰æ¡†æ¶ -->
                    <div class="d-flex justify-content-between">
                        <div>
                            <p class="fs-5 d-inline-flex mb-4 contenttitle">ç·Šæ€¥åº«å­˜</p>
                        </div>

                        <!-- <div>
                            <button class="mdc-button">
                                <span class="mdc-button__ripple"></span>
                                <span class="mdc-button__label fs-5 fw-normal">æ–‡å­—</span>
                            </button>
                            <button class="mdc-button mdc-button--outlined">
                                <span class="mdc-button__ripple"></span>
                                <span class="mdc-button__label fs-5 fw-normal">å¤–æ¡†å¤–æ¡†å¤–æ¡†</span>
                            </button>
                            <button class="mdc-button mdc-button--raised">
                                <span class="mdc-button__label fs-5 fw-normal">åº•è‰²</span>
                            </button>
                        </div> -->

                        <div>
                            <button class="mdc-button mdc-button--outlined" onclick="callParent(0)">
                                <span class="mdc-button__ripple"></span>
                                <span class="mdc-button__label fs-5 fw-normal">æ›´å¤š</span>
                            </button>
                        </div>
                    </div>


                    <table class="pageTable fs-5 fw-normal text-center">
                        <tr class="stockTable">
                        </tr>
                        <tr></tr>
                        <tr></tr>
                        <tr></tr>
                    </table>

                </div>


                <!-- å«è²¨æ¸…å–®---------------------------------------------------------------------------------- -->
                <div class="pageTable2 bg-white rounded-3 shadow-sm py-4 px-4 w-100 h-auto mb-4">

                    <!-- é€™è£¡æ˜¯å…§å®¹çš„æ¡†æ¶ï¼Œå¯ç›´æ¥æ”¹æ‰æ¡†æ¶ -->
                    <div class="d-flex justify-content-between">
                        <div>
                            <p class="fs-5 d-inline-flex mb-4 contenttitle">ç·Šæ€¥å«è²¨</p>
                        </div>
                        <div>
                            <button class="mdc-button mdc-button--outlined" onclick="callParent(1)">
                                <span class="mdc-button__ripple"></span>
                                <span class="mdc-button__label fs-5 fw-normal">æ›´å¤š</span>
                            </button>
                        </div>
                    </div>

                    <table class="pageTable fs-5 fw-normal text-center">
                        <tr class="buyTable">
                        </tr>

                        <tr></tr>
                        <tr></tr>
                        <tr></tr>
                    </table>

                </div>



                <div class="pageTable3 bg-white rounded-3 shadow-sm py-4 px-4 w-100 h-auto mb-4">

                    <!-- é€™è£¡æ˜¯å…§å®¹çš„æ¡†æ¶ï¼Œå¯ç›´æ¥æ”¹æ‰æ¡†æ¶ -->
                    <div class="d-flex justify-content-between">
                        <div>
                            <p class="fs-5 d-inline-flex mb-4 contenttitle">ç·Šæ€¥æ¥å–®</p>
                        </div>
                        <div>
                            <button class="mdc-button mdc-button--outlined" onclick="callParent(2)">
                                <span class="mdc-button__ripple"></span>
                                <span class="mdc-button__label fs-5 fw-normal">æ›´å¤š</span>
                            </button>
                        </div>
                    </div>

                    <table class="pageTable fs-5 fw-normal text-center">
                        <tr class="sellTable">
                        </tr>

                        <tr></tr>
                        <tr></tr>
                        <tr></tr>
                    </table>

                </div>

            </div>

        </div>
    </div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/javascript/materialdesigninit.js"></script>
    <script src="/javascript/ajaxconnect.js"></script>

    <script src="/javascript/orderstatus.js"></script>

    <script>
        // æ›´æ–°æ¨™é¡Œåç¨±----------------------------------------------------------------------------------------------------------------------------
        usercompanyname = JSON.parse(localStorage.getItem("accountBean")).companyname;
        if (usercompanyname != null || usercompanyname != "" || usercompanyname != undefined) {
            $("h1 span")[0].innerHTML = `${usercompanyname}ï¼Œæ­¡è¿å›åˆ°ç®¡ç†ä»‹é¢ï¼`;
        }


        // å‘¼å«çˆ¶é¡åˆ¥æ–¹æ³•------------------------------------------------------------------------------------------------------------------
        function callParent(transferData) {
            if (window.parent && window.parent.changepage) {
                let href = '';

                // 0ï¼šåº«å­˜æ¦‚æ³ã€1ï¼šå«è²¨ç®¡ç†ã€2ï¼šæ¥å–®ç®¡ç†ã€3ï¼šæ–°å¢åº«å­˜
                switch (transferData) {
                    case 0:
                        href = "http://localhost:8080/views/orderStock.html";
                        break;
                    case 1:
                        href = "http://localhost:8080/views/orderBuy.html";
                        break;
                    case 2:
                        href = "http://localhost:8080/views/orderSell.html";
                        break;
                    default:
                        console.log("href error");
                        break;
                }

                window.parent.changepage(href);	//å‘¼å«çˆ¶é é¢çš„SetComponentæ–¹æ³•

            }
        }




        // JSONå‡è³‡æ–™  ----------------------------------------------------------------------------------------------------------------------
        // ç·Šæ€¥åº«å­˜æ¸…å–®ï¼šProductNameSpec(å“åè¦æ ¼)ã€?StockOwn(å¯å‡ºç¾è²¨)ã€?CallShipping(å·²å«ç¾è²¨)ã€SaveQty(å®‰å…¨åº«å­˜)
        // å«è²¨æ¸…å–®ï¼šOrderId(å«è²¨ç·¨è™Ÿ)ã€CompanyName(ä¾›æ‡‰å•†)ã€OrderStatus(å®Œæˆéšæ®µ)ã€OrderStatus(ç•¶å‰ç‹€æ…‹)
        // æ¥å–®æ¸…å–®ï¼šOrderId(æ¥å–®ç·¨è™Ÿ)ã€CompanyName(æ¡è³¼å•†)ã€OrderStatus(å®Œæˆéšæ®µ)ã€OrderStatus(ç•¶å‰ç‹€æ…‹)

        let allPageList = [
            {
                pageList: [
                    {
                        outstock: 180,
                        stockownandcallshipping: 620,
                        safeqty: 800,
                        warningqty: 700,
                        productnamespec: 'æ¥µé®®æ·±æµ·å¤§é­·é­š'
                    },
                    {
                        productnamespec: "è™±ç›®é­š/1æ–¤",
                        stockown: 25,
                        warningqty: 30,
                        callshipping: 50,
                        safeqty: 75
                    },
                    {
                        productnamespec: "é»ƒéšé¯›/1æ–¤",
                        stockown: 0,
                        warningqty: 10,
                        callshipping: 30,
                        safeqty: 30
                    },
                    {
                        productnamespec: "ç‹—æ¯/1ç®±",
                        stockown: -10,
                        warningqty: 5,
                        callshipping: 0,
                        safeqty: 30
                    },
                    {
                        productnamespec: "(fake)é»ƒéšé¯›/1æ–¤",
                        stockown: 0,
                        warningqty: 10,
                        callshipping: 30,
                        safeqty: 30
                    },
                    {
                        productnamespec: "(fake)ç‹—æ¯/1ç®±",
                        stockown: -10,
                        warningqty: 5,
                        callshipping: 0,
                        safeqty: 30
                    }
                ]
            },
            {
                pageBuyList: [
                    {
                        companyname: "åƒè¬å±‹",
                        delayhours: 42,
                        orderid: "1D202210150006",
                        orderstatus: 2,
                        productnamespec: "ç¾æ•è²å¾‹è³“å¤§è¦<BR>",
                        statustime: "2022-10-15 21:16:14"
                    },
                    {
                        orderid: "#22098867185",
                        companyname: "åƒè¬å±‹",
                        orderstatus: 3,
                        statustime: "2022-09-22 13:14:17"
                    },
                    {
                        orderid: "#22094572193",
                        companyname: "åƒè¬å±‹",
                        orderstatus: 5,
                        statustime: "2022-08-01 06:04:07"
                    },
                    {
                        orderid: "#22097184939",
                        companyname: "åƒè¬å±‹",
                        orderstatus: 4,
                        statustime: "2022-09-30 22:14:17"
                    },
                    {
                        orderid: "#22097184939",
                        companyname: "(fake)è›Ÿé¾ä¼æ¥­æœ‰é™å…¬å¸",
                        orderstatus: 2,
                        statustime: "2022-09-22 13:14:17"
                    }
                ]
            },
            {
                pageSellList: [
                    {
                        companyname: "åƒè¬å±‹",
                        delayhours: 6,
                        orderid: "2D202210170001",
                        orderstatus: 2,
                        productnamespec: "æ¥µé®®æ™ºåˆ©é®­é­š<BR>",
                        statustime: "2022-10-17 10:23:58"
                    },
                    {
                        orderid: "#22098867185",
                        companyname: "é­šåƒé­šæµ·ç”¢",
                        orderstatus: 2,
                        statustime: "2022-09-22 13:14:17"
                    },
                    {
                        orderid: "#22094572193",
                        companyname: "é­šåƒé­šæµ·ç”¢",
                        orderstatus: 5,
                        statustime: "2022-09-22 13:14:17"
                    },
                    {
                        orderid: "#22097184939",
                        companyname: "é­šåƒé­šæµ·ç”¢",
                        orderstatus: 4,
                        statustime: "2022-09-22 13:14:17"
                    },
                    {
                        orderid: "#22098867185",
                        companyname: "(fake)é”å…‹ä¸‰è§’æ´²æœ‰é™å…¬å¸",
                        orderstatus: 2,
                        statustime: "2022-09-22 13:14:17"
                    },
                    {
                        orderid: "#22094572193",
                        companyname: "(fake)ç†±å¸¶å±±å§†é›†åœ˜",
                        orderstatus: 5,
                        statustime: "2022-09-22 13:14:17"
                    },
                    {
                        orderid: "#22097184939",
                        companyname: "(fake)å‚‘å…‹è¯é‚¦è‚¡ä»½æœ‰é™å…¬å¸",
                        orderstatus: 4,
                        statustime: "2022-09-22 13:14:17"
                    }
                ]
            }
        ]



        // æ¬„ä½ä¸­æ–‡åç¨±å°æ‡‰------------------------------
        //ç·Šæ€¥åº«å­˜æ¸…å–®
        let pageListName = [
            {
                ProductNameSpec: "å“åè¦æ ¼",
                StockOwn: "å¯å‡ºç¾è²¨",
                warningqty: "è­¦ç¤ºåº«å­˜",
                CallShipping: "å·²å«ç¾è²¨",
                SaveQty: "å®‰å…¨åº«å­˜"
            }
        ]

        //å«è²¨æ¸…å–®
        let pageBuyListName = [
            {
                ProductNameSpec: "å“é …",
                OrderId: "å«è²¨ç·¨è™Ÿ",
                CompanyName: "ä¾›æ‡‰å•†",
                OrderStatus: "ç•¶å‰ç‹€æ…‹",
                overtime: "é€¾æ™‚"
            }
        ]

        //æ¥å–®æ¸…å–®
        let pageSellListName = [
            {
                ProductNameSpec: "å“é …",
                OrderId: "æ¥å–®ç·¨è™Ÿ",
                CompanyName: "æ¡è³¼å•†",
                OrderStatus: "ç•¶å‰ç‹€æ…‹",
                overtime: "é€¾æ™‚"
            }
        ]




        // æ’ˆè³‡æ–™(ä½¿ç”¨éåŒæ­¥è³‡æ–™çš„æ–¹å¼æ’ˆ)ã€‚
        downloadData();
        async function downloadData() {

            // èˆ‡Serverå°æ¥çš„ajaxã€‚
            // é‚Šæ’ˆåŒæ™‚é€²è¡Œå¾ŒçºŒå‹•ä½œã€‚
            returnObj = await viewspage(null);

            if (returnObj.responseStatus != 200) {
                // æ’ˆå®Œå¾Œè§£æå‡è³‡æ–™ä¸¦æ›´æ–°ç•«é¢å…§å®¹ã€‚
                reNewData();
                // æ²’æ¥åˆ°è³‡æ–™
                console.log("page getServerData error:" + "(returnObj.responseStatus)" + returnObj.responseStatus);
                console.log(returnObj.responseObj);
            } else {
                // è™•ç†åŠåˆ¤æ–·é‚è¼¯ï¼š                
                allPageList = returnObj.responseObj;
                // æ’ˆå®Œå¾Œè§£æå‡è³‡æ–™ä¸¦æ›´æ–°ç•«é¢å…§å®¹ã€‚
                reNewData();
            }

            // reNewData();

        }


        function reNewData() {
            let pageDataNum = 3;  //æ¯é æœ€å¤š5ç­†è³‡æ–™ã€‚

            // æœ€ä¸Šæ–¹ä»£è¾¦æ•¸é‡æ¬„ä½
            $(".pageTodoTable p")[0].innerHTML = allPageList[0].pageList.length;
            $(".pageTodoTable p")[1].innerHTML = allPageList[1].pageBuyList.length;
            $(".pageTodoTable p")[2].innerHTML = allPageList[2].pageSellList.length;


            // æ¨™é¡Œæ¬„ä½----------------------------------------------------------
            // ğŸ…&#127312; ğŸ…‘&#127313; ğŸ…’&#127314; ğŸ…“&#127315;
            // $(".pageTable1 table.pageTable")[0].innerHTML = `
            // <tr class="stockTable">
            //     <th>${pageListName[0].ProductNameSpec}</th>
            //     <th>ç¼ºè²¨æ•¸<span class="ms-1" style="font-size: 19px; display: inline-block; transform: translateY(1px);">&#127312;</span> <br> <span class="fs-4">&#127313; - &#127314;</span></th>
            //     <th>å®‰å…¨åº«å­˜<span class="ms-1 fs-4" style="display: inline-block; transform: translateY(2px);">&#127313;</span></th>
            //     <th>å¯å‡ºç¾è²¨ + å·²å«ç¾è²¨<span class="ms-1 fs-4" style="display: inline-block; transform: translateY(2px);">&#127314;</span> <br> <span class="fs-4">&#127314; &lsaquo; &#127315;</span></th>
            //     <th>è­¦ç¤ºåº«å­˜<span class="ms-1 fs-4" style="display: inline-block; transform: translateY(2px);">&#127315;</span></th>
            // </tr>`;
            $(".pageTable1 table.pageTable")[0].innerHTML = `
            <tr class="stockTable">
                <th style="width: 20%;">${pageListName[0].ProductNameSpec}</th>
                <th style="width: 15%;">ç¼ºè²¨æ•¸(A) <br> <span class="fs-4">&#127313; - &#127314;</span></th>
                <th style="width: 15%;">å®‰å…¨åº«å­˜(B)</th>
                <th style="width: 18%;">å¯å‡ºç¾è²¨ + å·²å«ç¾è²¨(C) <br> <span class="fs-4">&#127314; &lsaquo; &#127315;</span></th>
                <th style="width: 15%;">è­¦ç¤ºåº«å­˜(D)</th>
            </tr>`;


            // å«è²¨æ¬„ä½
            $(".pageTable2 table.pageTable")[0].innerHTML = `
            <tr class="buyTable">
                <th style="width: 16%;">${pageBuyListName[0].OrderId}</th>
                <th style="width: 12%;">${pageBuyListName[0].CompanyName}</th>
                <th style="width: 20%;">${pageBuyListName[0].ProductNameSpec}</th>
                <th colspan="2"style="width: 35%;">${pageBuyListName[0].OrderStatus}</th>
                <th style="width: 12%;">${pageBuyListName[0].overtime}</th>
            </tr>`;


            // æ¥å–®æ¬„ä½
            $(".pageTable3 table.pageTable")[0].innerHTML = `
            <tr class="sellTable">
                <th style="width: 16%;">${pageSellListName[0].OrderId}</th>
                <th style="width: 12%;">${pageSellListName[0].CompanyName}</th>
                <th style="width: 20%;">${pageSellListName[0].ProductNameSpec}</th>
                <th colspan="2"style="width: 35%;">${pageSellListName[0].OrderStatus}</th>
                <th style="width: 12%;">${pageSellListName[0].overtime}</th>
            </tr>`;



            for (let i = 0; i < (allPageList[0].pageList.length <= 3 ? allPageList[0].pageList.length : 3); i++) {

                // å‰µé€ <tr>çš„Htmlæ ¼å¼ï¼Œä¸¦å°‡è³‡æ–™å¸¶å…¥ã€‚
                // 08
                let trHtmlData = `
                <tr>
                    <td>${allPageList[0].pageList[i].productnamespec}</td>
                    <td style="border-left: 1px solid var(--color-border);"><span class="${allPageList[0].pageList[i].outstock >= 50 ? 'dangerTd' : 'warningTd'}">${allPageList[0].pageList[i].outstock}</span></td>                    
                    <td style="border-left: 1px solid var(--color-border);">${allPageList[0].pageList[i].safeqty}</td>
                    <td>${allPageList[0].pageList[i].stockownandcallshipping}</td>   
                    <td>${allPageList[0].pageList[i].warningqty}</td>                  
                </tr>`

                // æŠŠè£½ä½œå®Œçš„træ”¾å›å»tabelä¸­ã€‚
                $(".pageTable1 table.pageTable").append(trHtmlData);
            }



            for (let i = 0; i < (allPageList[1].pageBuyList.length <= 3 ? allPageList[1].pageBuyList.length : 3); i++) {

                // ç•¶å‰ç‹€æ…‹
                let returnbuystatus = checkstatus(0, allPageList[1].pageBuyList[i].orderstatus);

                // åˆ¤æ–·å•†å“å­—ä¸²
                let productStr = allPageList[1].pageBuyList[i].productnamespec;
                let productCount = (productStr.match(/<BR>/g) || []).length;
                let fixProductStr = "";

                if (productCount > 3) {
                    let finalProductStr = "";
                    let cutProudctStr = productStr;

                    for (let i = 0; i < 3; i++) {
                        let singleProductLen = cutProudctStr.indexOf('>') + 1;
                        let singleProductStr = cutProudctStr.substr(0, singleProductLen);
                        finalProductStr += singleProductStr;
                        cutProudctStr = cutProudctStr.substr(singleProductLen, cutProudctStr.length);
                    }
                    fixProductStr = finalProductStr.substr(0, (finalProductStr.length - 4));
                } else {
                    fixProductStr = productStr.substr(0, (productStr.length - 4));
                }


                // å‰µé€ <tr>çš„Htmlæ ¼å¼ï¼Œä¸¦å°‡è³‡æ–™å¸¶å…¥ã€‚
                let trHtmlData2 = `
                <tr>
                    <td>${allPageList[1].pageBuyList[i].orderid}</td>
                    <td>${allPageList[1].pageBuyList[i].companyname}</td>
                    <td style="text-align:center;">
                        <div class="w-100 my-2">
                            <span>${fixProductStr}</span>
                        </div>
                        <div>
                            <span>${productCount > 3 ? `......å…±${productCount}é …` : ""}</span>
                        </div>
                    </td>
                    <td colspan="2">
                        <div id="timeline" class="pe-4">
                            <ol class="forpage">
                                <li class="active">
                                    <span class="point d-block"></span>
                                    <span class="diplome d-block">${returnbuystatus.prev}</span>
                                    <span class="timestamp d-block">${(allPageList[1].pageBuyList[i].statustime).replace(" ", "<br>")}</span>
                                </li>
                                <li>
                                    <span class="point d-block"></span>
                                    <span class="diplome d-block">${returnbuystatus.now}</span>
                                    <span class="timestamp d-block">${timeCounter(allPageList[1].pageBuyList[i].statustime, allPageList[1].pageBuyList[i].orderstatus)}</span>
                                </li>
                            </ol>
                        </div>
                    </td>
                    <td class="buyOverTime"></td>
                </tr>`

                // æŠŠè£½ä½œå®Œçš„træ”¾å›å»tableä¸­ã€‚
                $(".pageTable2 table.pageTable").append(trHtmlData2);


                //ç·Šæ€¥å«è²¨æ¸…å–®é€¾æ™‚
                var dateBuy = new Date(`${(timeCounter(allPageList[1].pageBuyList[i].statustime)).replace("<br>", " ")}`);// éå»æ™‚é–“

                var dateNow = new Date();//ç¾åœ¨æ™‚é–“

                var sOne = dateBuy.getTime(), sTwo = dateNow.getTime();
                var totalBuy = (sTwo - sOne) / 1000;

                var dayBuy = parseInt(totalBuy / (24 * 60 * 60)); // å¤©æ•¸
                var afterDayBuy = totalBuy - dayBuy * 24 * 60 * 60; // å–å¾—ç®—å‡ºå¤©æ•¸çš„å‰©é¤˜ç§’æ•¸
                var hourBuy = parseInt(afterDayBuy / (60 * 60)); // å°æ™‚


                $(".buyOverTime")[i].innerHTML = (dayBuy + 'å¤©' + hourBuy + 'æ™‚');

            }



            for (let i = 0; i < (allPageList[2].pageSellList.length <= 3 ? allPageList[2].pageSellList.length : 3); i++) {

                let returnsellstatus = checkstatus(1, allPageList[2].pageSellList[i].orderstatus);

                // åˆ¤æ–·å•†å“å­—ä¸²
                let productStr = allPageList[2].pageSellList[i].productnamespec;
                let productCount = (productStr.match(/<BR>/g) || []).length;
                let fixProductStr = "";

                if (productCount > 3) {
                    let finalProductStr = "";
                    let cutProudctStr = productStr;

                    for (let i = 0; i < 3; i++) {
                        let singleProductLen = cutProudctStr.indexOf('>') + 1;
                        let singleProductStr = cutProudctStr.substr(0, singleProductLen);
                        finalProductStr += singleProductStr;
                        cutProudctStr = cutProudctStr.substr(singleProductLen, cutProudctStr.length);
                    }
                    fixProductStr = finalProductStr.substr(0, (finalProductStr.length - 4));
                } else {
                    fixProductStr = productStr.substr(0, (productStr.length - 4));
                }

                // å‰µé€ <tr>çš„Htmlæ ¼å¼ï¼Œä¸¦å°‡è³‡æ–™å¸¶å…¥ã€‚
                let trHtmlData3 = `
                <tr>
                    <td>${allPageList[2].pageSellList[i].orderid}</td>
                    <td>${allPageList[2].pageSellList[i].companyname}</td>
                    <td style="text-align:center;">
                        <div class="w-100 my-2">
                            <span>${fixProductStr}</span>
                        </div>
                        <div>
                            <span>${productCount > 3 ? `......å…±${productCount}é …` : ""}</span>
                        </div>
                    </td>
                    <td colspan="2">
                        <div id="timeline" class="pe-4">
                            <ol class="forpage">
                                <li class="active">
                                    <span class="point d-block"></span>
                                    <span class="diplome d-block">${returnsellstatus.prev}</span>
                                    <span class="timestamp d-block">${(allPageList[2].pageSellList[i].statustime).replace(" ", "<br>")}</span>
                                </li>
                                <li>
                                    <span class="point d-block"></span>
                                    <span class="diplome d-block">${returnsellstatus.now}</span>
                                    <span class="timestamp d-block">${timeCounter(allPageList[2].pageSellList[i].statustime, allPageList[2].pageSellList[i].orderstatus)}</span>                                            
                                </li>
                            </ol>
                        </div>
                    </td>                            
                    <td class="sellOverTime"></td>
                </tr>`

                // æŠŠè£½ä½œå®Œçš„træ”¾å›å»tableä¸­ã€‚
                $(".pageTable3 table.pageTable").append(trHtmlData3);


                //ç·Šæ€¥æ¥å–®æ¸…å–®é€¾æ™‚
                var dateSell = new Date(`${(timeCounter(allPageList[2].pageSellList[i].statustime)).replace("<br>", " ")}`);// éå»æ™‚é–“

                var dateNow2 = new Date();//ç¾åœ¨æ™‚é–“

                var s1 = dateSell.getTime(), s2 = dateNow2.getTime();
                var totalSell = (s2 - s1) / 1000;

                var daySell = parseInt(totalSell / (24 * 60 * 60)); // å¤©æ•¸
                var afterDaySell = totalSell - daySell * 24 * 60 * 60; // å–å¾—ç®—å‡ºå¤©æ•¸çš„å‰©é¤˜ç§’æ•¸
                var hourSell = parseInt(afterDaySell / (60 * 60)); // å°æ™‚

                $(".sellOverTime")[i].innerHTML = (daySell + 'å¤©' + hourSell + 'æ™‚');

            }

        }

    </script>


</body>

</html>